# SongsDataModel
Udacity Data Engineering Nanodegree Program. Data modelling with Postgres

Maping table fron original JSON Files to studentdb tables

| Origin     | OriginField : SampleData                                                                                                                                                          | Destanation<br>table.column | Comment                                                                      |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------- | ---------------------------------------------------------------------------- |
| song\_data | "num\_songs": 1                                                                                                                                                                   | None                        | excluded from import                                                         |
| song\_data | "artist\_id": "ARMAC4T1187FB3FA4C",                                                                                                                                               | None                        | excluded from import                                                         |
| None       | None                                                                                                                                                                              | artists.artist\_id          | int serial PRIMARY KEY                                                       |
| song\_data | "artist\_latitude": 40.82624,                                                                                                                                                     | artists.latitude            | float                                                                        |
| song\_data | "artist\_longitude": -74.47995,                                                                                                                                                   | artists.longitude           | float                                                                        |
| song\_data | "artist\_location": "Morris Plains, NJ",                                                                                                                                          | artists.location            | varchar                                                                      |
| song\_data | "artist\_name": "The Dillinger Escape Plan",                                                                                                                                      | artists.name                | varchar                                                                      |
| song\_data | "song\_id": "SOBBUGU12A8C13E95D",                                                                                                                                                 | None                        | excluded from import                                                         |
| None       | None                                                                                                                                                                              | songs.song\_id              | int serial PRIMARY KEY                                                       |
| None       | None                                                                                                                                                                              | songs.artist\_id            | int refference to artists.artist\_id                                         |
| song\_data | "title": "Setting Fire to Sleeping Giants",                                                                                                                                       | songs.title                 | varchar. Is used to map songplay to songs table with song\_id                |
| song\_data | "duration": 207.77751,                                                                                                                                                            | songs.duration              | float                                                                        |
| song\_data | "year": 2004                                                                                                                                                                      | songs .year                 | int                                                                          |
| log\_data  | "artist": "Alicia Keys",                                                                                                                                                          | artists.name                | varchar. Is used to map songplay to artists table with artist\_id            |
| log\_data  | auth: "Logged In",                                                                                                                                                                | None                        | excluded from import                                                         |
| None       | None                                                                                                                                                                              | users.user\_id              | int serial PRIMARY KEY                                                       |
| log\_data  | "firstName": "Ryan",                                                                                                                                                              | users.firstName             | varchar                                                                      |
| log\_data  | "gender": "M",                                                                                                                                                                    | users.gender                | varchar                                                                      |
| log\_data  | "itemInSession": 1,                                                                                                                                                               | None                        | excluded from import                                                         |
| log\_data  | "lastName": "Smith",                                                                                                                                                              | users.lastName              | varchar                                                                      |
| log\_data  | "length": 216.47628,                                                                                                                                                              | None                        | excluded from import                                                         |
| log\_data  | "level": "free",                                                                                                                                                                  | users.level                 | varchar                                                                      |
| log\_data  | "level": "free",                                                                                                                                                                  | songplay.level              | varchar                                                                      |
| None       | None                                                                                                                                                                              | songplay.songplay\_id       | int serial PRIMARY KEY                                                       |
| None       | None                                                                                                                                                                              | songplay.user\_id           | int refference to users.user\_id                                             |
| None       | None                                                                                                                                                                              | songplay.song\_id           | int refference to songs.song\_id                                             |
| None       | None                                                                                                                                                                              | songplay.artist\_id         | int refference to artists.artist\_id                                         |
| log\_data  | "location": "San Jose-Sunnyvale-Santa Clara, CA",                                                                                                                                 | songplay.location           | varchar                                                                      |
| log\_data  | "method": "PUT",                                                                                                                                                                  | None                        | excluded from import                                                         |
| log\_data  | "page": "NextSong",                                                                                                                                                               | None                        | excluded from import                                                         |
| log\_data  | "registration": 1541016707796.0,                                                                                                                                                  | None                        | excluded from import                                                         |
| log\_data  | "sessionId": 480,                                                                                                                                                                 | songplay.session\_id        | int                                                                          |
| log\_data  | "song": "Empire State Of Mind (Part II) Broken Down",                                                                                                                             | songplay.song               | varchar. Is used to map songplay to songs table with song\_id                |
| log\_data  | status: 200,                                                                                                                                                                      | None                        | excluded from import                                                         |
| log\_data  | "ts": 1541979748796,                                                                                                                                                              | songplay.start\_time        | int                                                                          |
| log\_data  | songplay "userAgent": "\\"Mozilla\\/5.0 (X11; Linux x86\_64) AppleWebKit\\/537.36 (KHTML, like Gecko) Ubuntu Chromium\\/36.0.1985.125 Chrome\\/36.0.1985.125 Safari\\/537.36\\"", | songplay.user\_agent        | varchar                                                                      |
| log\_data  | "userId": "26"                                                                                                                                                                    | None                        | excluded from import                                                         |
| None       | None                                                                                                                                                                              | time.start\_time            | int refference to songplay.start\_time                                       |
| None       | None                                                                                                                                                                              | time.hour                   | datetime.datetime.fromtimestamp( time.start\_time/1e3).hour                  |
| None       | None                                                                                                                                                                              | time.day                    | datetime.datetime.fromtimestamp( time.start\_time/1e3).day                   |
| None       | None                                                                                                                                                                              | time.week                   | datetime.datetime.fromtimestamp( time.start\_time/1e3).isocalendar().week    |
| None       | None                                                                                                                                                                              | time.month                  | datetime.datetime.fromtimestamp( time.start\_time/1e3).month                 |
| None       | None                                                                                                                                                                              | time.year                   | datetime.datetime.fromtimestamp( time.start\_time/1e3).year                  |
| None       | None                                                                                                                                                                              | time.weekday                | datetime.datetime.fromtimestamp( time.start\_time/1e3).isocalendar().weekday |
